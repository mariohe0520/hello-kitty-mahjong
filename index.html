<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>🎀 Hello Kitty 麻将</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/tiles.css">
<link rel="stylesheet" href="css/animations.css">
</head>
<body>
<!-- ===== SPLASH SCREEN ===== -->
<div id="splash" class="splash">
  <div class="splash-content">
    <div class="splash-logo">🎀</div>
    <h1 class="splash-title">Hello Kitty 麻将</h1>
    <p class="splash-sub">可爱又好玩的麻将世界</p>
    <div class="splash-loading">加载中...</div>
  </div>
</div>

<!-- ===== MAIN MENU ===== -->
<div id="menu" class="page" style="display:none">
  <div class="menu-header">
    <div class="menu-logo">🎀</div>
    <h1 class="menu-title">Hello Kitty 麻将</h1>
  </div>
  <div class="menu-buttons">
    <button class="menu-btn btn-pink" onclick="App.startGame('beijing')">
      <span class="btn-icon">🏯</span>
      <span class="btn-text">北京麻将</span>
      <span class="btn-desc">经典规则，简单上手</span>
    </button>
    <button class="menu-btn btn-red" onclick="App.startGame('sichuan')">
      <span class="btn-icon">🌶️</span>
      <span class="btn-text">川麻血战</span>
      <span class="btn-desc">血战到底，刺激过瘾</span>
    </button>
    <button class="menu-btn btn-purple" onclick="App.showMultiplayer()">
      <span class="btn-icon">👥</span>
      <span class="btn-text">好友对战</span>
      <span class="btn-desc">分享链接，一起玩</span>
    </button>
    <button class="menu-btn btn-blue" onclick="App.showTutorial()">
      <span class="btn-icon">📖</span>
      <span class="btn-text">新手教学</span>
      <span class="btn-desc">从零学会打麻将</span>
    </button>
    <button class="menu-btn btn-gray" onclick="App.showSettings()">
      <span class="btn-icon">⚙️</span>
      <span class="btn-text">设置</span>
    </button>
  </div>
  <div class="menu-footer">
    <span class="version">v0.1.0</span>
  </div>
</div>

<!-- ===== GAME TABLE ===== -->
<div id="game" class="page" style="display:none">
  <!-- Top bar: wind/round info -->
  <div class="game-topbar">
    <button class="icon-btn" onclick="App.backToMenu()">←</button>
    <div class="round-info">
      <span id="wind-indicator">东风</span>
      <span id="round-number">第1局</span>
    </div>
    <button class="icon-btn" onclick="App.toggleSettings()">⚙</button>
  </div>

  <!-- Mahjong table (3D perspective) -->
  <div class="table-container">
    <div class="mahjong-table" id="mahjong-table">
      <!-- Top player (opponent/AI) -->
      <div class="player-area player-top" id="player-top">
        <div class="player-label"><span class="player-name">对家</span> <img class="player-avatar-img" src="assets/avatars/bear.svg" alt="🐻" onerror="this.outerHTML='<span class=player-avatar>🐻</span>'"></div>
        <div class="hand hand-top" id="hand-top"></div>
      </div>

      <!-- Left player -->
      <div class="player-area player-left" id="player-left">
        <div class="player-label"><img class="player-avatar-img" src="assets/avatars/bunny.svg" alt="🐰" onerror="this.outerHTML='<span class=player-avatar>🐰</span>'"> <span class="player-name">上家</span></div>
        <div class="hand hand-side" id="hand-left"></div>
      </div>

      <!-- Right player -->
      <div class="player-area player-right" id="player-right">
        <div class="player-label"><span class="player-name">下家</span> <img class="player-avatar-img" src="assets/avatars/fox.svg" alt="🦊" onerror="this.outerHTML='<span class=player-avatar>🦊</span>'"></div>
        <div class="hand hand-side" id="hand-right"></div>
      </div>

      <!-- Center area: discard pool + remaining tiles -->
      <div class="table-center">
        <div class="discard-pool" id="discard-pool"></div>
        <div class="remaining-tiles">
          <span id="tiles-remaining">136</span>
          <small>余牌</small>
        </div>
      </div>

      <!-- Bottom player (you) -->
      <div class="player-area player-bottom" id="player-bottom">
        <div class="hand hand-bottom" id="hand-bottom"></div>
        <div class="player-label">
          <img class="player-avatar-img" src="assets/avatars/kitty.svg" alt="🎀" onerror="this.outerHTML='<span class=player-avatar>🎀</span>'">
          <span class="player-name">我</span>
          <span class="player-score" id="my-score">25000</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Action buttons -->
  <div class="action-bar" id="action-bar" style="display:none">
    <button class="action-btn btn-pass" onclick="Game.pass()">过</button>
    <button class="action-btn btn-chi" onclick="Game.chi()" style="display:none">吃</button>
    <button class="action-btn btn-peng" onclick="Game.peng()" style="display:none">碰</button>
    <button class="action-btn btn-gang" onclick="Game.gang()" style="display:none">杠</button>
    <button class="action-btn btn-hu" onclick="Game.hu()" style="display:none">胡!</button>
  </div>
</div>

<!-- ===== TUTORIAL ===== -->
<div id="tutorial" class="page" style="display:none">
  <div class="tutorial-header">
    <button class="icon-btn" onclick="App.backToMenu()">←</button>
    <h2>麻将新手教学</h2>
  </div>
  <div class="tutorial-content" id="tutorial-content">
    <div class="tutorial-step active" data-step="1">
      <h3>🀄 什么是麻将？</h3>
      <p>麻将是四个人玩的桌游，目标是用手里的牌组成特定的牌型来"胡牌"获胜。</p>
      <div class="tile-demo"></div>
      <p class="tile-caption">上面是"顺子"和"刻子"示例</p>
    </div>
    <div class="tutorial-step" data-step="2">
      <h3>🎴 麻将牌有哪些？</h3>
      <p>麻将有四种花色，每种1-9各四张：</p>
      <div class="tile-demo"></div>
    </div>
    <div class="tutorial-step" data-step="3">
      <h3>🏆 怎么赢？</h3>
      <p>把手里14张牌组成 <b>4组+1对</b> 就赢了！</p>
      <div class="tile-demo"></div>
    </div>
    <div class="tutorial-nav">
      <button class="btn-nav" onclick="Tutorial.prev()">上一步</button>
      <span id="tutorial-progress">1/3</span>
      <button class="btn-nav" onclick="Tutorial.next()">下一步</button>
    </div>
  </div>
</div>

<!-- ===== WIN SCREEN ===== -->
<div id="win-screen" class="modal" style="display:none">
  <div class="modal-content win-content">
    <div class="win-title">🎉 胡牌！</div>
    <div class="win-hand" id="win-hand"></div>
    <div class="win-score" id="win-score"></div>
    <div class="win-fans" id="win-fans"></div>
    <button class="menu-btn btn-pink" onclick="App.nextRound()">下一局</button>
    <button class="menu-btn btn-gray" onclick="App.backToMenu()">返回菜单</button>
  </div>
</div>

<script src="js/tiles.js"></script>
<script src="js/rules-beijing.js"></script>
<script src="js/rules-sichuan.js"></script>
<script src="js/ai.js"></script>
<script src="js/game.js"></script>
<script src="js/tutorial.js"></script>
<script src="js/app.js"></script>
</body>
</html>
