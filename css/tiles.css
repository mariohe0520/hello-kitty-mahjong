/* ═══════════════════════════════════════════════════════════════
   Hello Kitty 麻将 v2.0 — Tile Styles (Premium 3D)
   ═══════════════════════════════════════════════════════════════ */

/* ─── Base Tile ─── */
.tile {
  width: 36px; height: 48px; min-width: 0; min-height: 0;
  /* Premium cream gradient with subtle warm tones */
  background: linear-gradient(170deg,
    #ffffff 0%,
    #fffdf5 10%,
    #faf6e8 35%,
    #f4edcf 70%,
    #ecdfc0 100%);
  border: 1px solid #c4b894; border-radius: 7px;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  font-weight: 700; cursor: pointer; position: relative;
  overflow: hidden; user-select: none; -webkit-user-select: none;
  box-sizing: border-box; flex-shrink: 0;
  transition: transform 0.12s cubic-bezier(0.34,1.56,0.64,1), box-shadow 0.12s ease;
  box-shadow:
    0 1px 0 0 #f0e8cc,
    0 3px 0 0 #c8b890,
    0 5px 0 0 #b4a070,
    0 6px 3px rgba(0,0,0,0.28),
    inset 0 1px 0 rgba(255,255,255,0.95),
    inset 0 -1px 0 rgba(0,0,0,0.04);
}

.tile::before {
  content: ''; position: absolute;
  bottom: -4px; left: 1px; right: 1px; height: 5px;
  background: linear-gradient(180deg, #d4c8a0, #b8a880);
  border-radius: 0 0 5px 5px; z-index: -1;
}
.tile::after {
  content: ''; position: absolute;
  top: 0; left: 0; right: 0; height: 40%;
  background: linear-gradient(180deg, rgba(255,255,255,0.35), transparent);
  border-radius: 7px 7px 0 0; pointer-events: none; z-index: 3;
}
.tile:active:not(.locked):not(.face-down) {
  transform: translateY(2px);
  box-shadow:
    0 1px 0 0 #d8d0b8,
    0 2px 0 0 #c8b890,
    0 2px 2px rgba(0,0,0,0.15),
    inset 0 1px 0 rgba(255,255,255,0.5);
}

/* ─── SVG tile image ─── */
.tile-img { display: none; }
@media (min-width: 768px) {
  .tile-img {
    position: absolute; top: 0; left: 0;
    width: 100%; height: 100%; object-fit: contain;
    display: block; pointer-events: none; z-index: 2;
    background: linear-gradient(175deg, #fffef8, #f5f0e0 40%, #e8e0c8);
    border-radius: inherit; padding: 3px; box-sizing: border-box;
  }
}

/* ─── Selected ─── */
.tile.selected {
  transform: translateY(-12px) scale(1.08);
  box-shadow:
    0 1px 0 0 #e8e0c8,
    0 8px 0 0 #c8b890,
    0 12px 0 0 #b8a878,
    0 14px 4px rgba(0,0,0,0.2),
    0 0 20px rgba(255,107,157,0.4),
    inset 0 1px 0 rgba(255,255,255,0.8);
  border-color: #ff6b9d; z-index: 10;
}

/* ─── Face-down (Hello Kitty pink back) ─── */
.tile.face-down {
  background:
    repeating-linear-gradient(45deg, transparent, transparent 3px, rgba(255,255,255,0.12) 3px, rgba(255,255,255,0.12) 4px),
    repeating-linear-gradient(-45deg, transparent, transparent 3px, rgba(255,255,255,0.06) 3px, rgba(255,255,255,0.06) 4px),
    linear-gradient(135deg, #ff6b9d 0%, #ff8fbf 40%, #ffb3d9 100%);
  border-color: #e55a8a;
  box-shadow:
    0 1px 0 0 #f090b0,
    0 3px 0 0 #c04878,
    0 5px 0 0 #a03860,
    0 6px 2px rgba(0,0,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.35);
}
.tile.face-down::before { background: linear-gradient(180deg, #e55a8a, #c04878); }
.tile.face-down::after { background: linear-gradient(180deg, rgba(255,255,255,0.25), transparent); }
.tile-back { font-size: 16px; line-height: 1; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)); }

/* ─── Tile text content ─── */
.tile-rank {
  font-size: 20px; line-height: 1; font-weight: 900;
  text-shadow: 0 1px 0 rgba(255,255,255,0.6), 0 1px 3px rgba(0,0,0,0.2);
  pointer-events: none; z-index: 1; position: relative;
  letter-spacing: -0.5px;
}
.tile-suit {
  font-size: 10px; line-height: 1; margin-top: 1px; font-weight: 800;
  pointer-events: none; z-index: 1; position: relative;
  opacity: 0.85;
}
.tile-honor {
  font-size: 22px; font-weight: 900; line-height: 1;
  text-shadow: 0 1px 0 rgba(255,255,255,0.5), 0 1px 3px rgba(0,0,0,0.2);
  pointer-events: none; z-index: 1; position: relative;
}

/* ─── Small tiles ─── */
.tile-sm {
  width: 24px; height: 32px; min-width: 0; min-height: 0;
  border-radius: 5px;
  box-shadow: 0 1px 0 0 #e8e0c8, 0 2px 0 0 #c8b890, 0 3px 0 0 #b8a878, 0 4px 2px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.6);
}
.tile-sm .tile-rank { font-size: 13px; }
.tile-sm .tile-suit { font-size: 7px; }
.tile-sm .tile-honor { font-size: 14px; }
.tile-sm .tile-back { font-size: 11px; }
.tile-sm::before { height: 3px; }

/* ─── Mini tiles (discard pool) — now larger for readability ─── */
.tile-mini {
  width: 28px; height: 36px; min-width: 0; min-height: 0;
  border-radius: 4px;
  box-shadow: 0 1px 0 0 #d8d0b8, 0 2px 0 0 #c0b890, 0 3px 2px rgba(0,0,0,0.2);
}
.tile-mini .tile-rank { font-size: 14px; font-weight: 900; }
.tile-mini .tile-suit { font-size: 8px; }
.tile-mini .tile-honor { font-size: 15px; font-weight: 900; }
.tile-mini .tile-back { font-size: 10px; }
.tile-mini::before, .tile-mini::after { display: none; }

/* ─── Animations ─── */
@keyframes tileEnter {
  0% { transform: translateY(-30px) rotateX(90deg); opacity: 0; }
  60% { transform: translateY(3px) rotateX(-5deg); opacity: 1; }
  100% { transform: translateY(0) rotateX(0); }
}
.tile.entering { animation: tileEnter 0.3s cubic-bezier(0.34,1.56,0.64,1) forwards; }

@keyframes tileDiscard {
  0% { transform: scale(1.2); opacity: 1; }
  40% { transform: scale(0.7) translateY(-30px); opacity: 0.9; }
  100% { transform: scale(0.6) translateY(0); opacity: 1; }
}
.tile.discarding { animation: tileDiscard 0.4s ease forwards; z-index: 50; pointer-events: none; }

.tile.winning { animation: winGlow 0.8s ease-in-out infinite; border-color: #f5c518; }
@keyframes winGlow {
  0%, 100% { box-shadow: 0 1px 0 0 #e8e0c8, 0 3px 0 0 #c8b890, 0 5px 0 0 #b8a878, 0 6px 8px rgba(245,197,24,0.3); }
  50% { box-shadow: 0 1px 0 0 #e8e0c8, 0 3px 0 0 #c8b890, 0 5px 0 0 #b8a878, 0 6px 20px rgba(245,197,24,0.7), 0 0 30px rgba(245,197,24,0.4); }
}

.tile.locked { opacity: 0.9; border-color: #a0a0a0; cursor: default; }

@media (hover: hover) {
  .tile:hover:not(.face-down):not(.locked):not(.selected) {
    transform: translateY(-6px) scale(1.04);
    box-shadow: 0 1px 0 0 #e8e0c8, 0 6px 0 0 #c8b890, 0 8px 0 0 #b8a878, 0 10px 6px rgba(0,0,0,0.25), 0 0 12px rgba(255,107,157,0.15);
    border-color: rgba(255,107,157,0.4);
  }
}

/* ─── Playable tile glow (tiles the player can discard) ─── */
.tile.playable-glow {
  box-shadow:
    0 1px 0 0 #e8e0c8,
    0 3px 0 0 #c8b890,
    0 5px 0 0 #b8a878,
    0 6px 2px rgba(0,0,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.8),
    0 0 8px rgba(245,197,24,0.25);
}

/* ─── Hint highlight (suggested discard) ─── */
.tile.hint-highlight {
  border-color: #22c55e !important;
  box-shadow:
    0 1px 0 0 #e8e0c8,
    0 3px 0 0 #c8b890,
    0 5px 0 0 #b8a878,
    0 6px 2px rgba(0,0,0,0.3),
    0 0 16px rgba(34,197,94,0.5),
    0 0 4px rgba(34,197,94,0.3) !important;
  animation: hintPulse 1.5s ease-in-out infinite;
}
@keyframes hintPulse {
  0%, 100% { box-shadow: 0 1px 0 0 #e8e0c8, 0 3px 0 0 #c8b890, 0 5px 0 0 #b8a878, 0 6px 2px rgba(0,0,0,0.3), 0 0 8px rgba(34,197,94,0.3); }
  50% { box-shadow: 0 1px 0 0 #e8e0c8, 0 3px 0 0 #c8b890, 0 5px 0 0 #b8a878, 0 6px 2px rgba(0,0,0,0.3), 0 0 20px rgba(34,197,94,0.7), 0 0 6px rgba(34,197,94,0.5); }
}

/* ─── Danger tile indicator (riichi/tenpai opponent) ─── */
.tile.danger-tile {
  position: relative;
}
.tile.danger-tile::before {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: 9px;
  border: 2px solid rgba(239,68,68,0.6);
  animation: dangerBorder 1.2s ease-in-out infinite;
  z-index: 4;
  pointer-events: none;
}
@keyframes dangerBorder {
  0%, 100% { border-color: rgba(239,68,68,0.3); box-shadow: 0 0 6px rgba(239,68,68,0.2); }
  50% { border-color: rgba(239,68,68,0.8); box-shadow: 0 0 14px rgba(239,68,68,0.5); }
}

/* ─── Tile set themes ─── */
/* Modern tile set */
.tile-set-modern .tile {
  background: linear-gradient(175deg, #ffffff 0%, #f0f0f0 40%, #e0e0e0 100%);
  border-color: #b0b0b0;
  border-radius: 10px;
  box-shadow: 0 1px 0 #d0d0d0, 0 3px 0 #b0b0b0, 0 5px 0 #909090, 0 6px 4px rgba(0,0,0,0.2);
}
.tile-set-modern .tile .tile-rank { font-family: 'Helvetica Neue', sans-serif; }
.tile-set-modern .tile::before { background: linear-gradient(180deg, #c0c0c0, #909090); }

/* Cute tile set */
.tile-set-cute .tile {
  background: linear-gradient(175deg, #fff8fc 0%, #ffe8f0 40%, #ffd0e0 100%);
  border-color: #f0a0c0;
  border-radius: 12px;
  box-shadow: 0 1px 0 #ffc0d8, 0 3px 0 #f0a0c0, 0 5px 0 #e090b0, 0 6px 4px rgba(255,107,157,0.2);
}
.tile-set-cute .tile .tile-rank { color: #d03070; }
.tile-set-cute .tile .tile-suit { color: #e060a0; }
.tile-set-cute .tile::before { background: linear-gradient(180deg, #f0a0c0, #e090b0); }

/* ─── Tile slide animation for meld reveals ─── */
@keyframes tileSlideIn {
  0% { transform: translateX(-40px) scale(0.7); opacity: 0; }
  60% { transform: translateX(4px) scale(1.05); opacity: 1; }
  100% { transform: translateX(0) scale(1); opacity: 1; }
}
.tile.meld-reveal {
  animation: tileSlideIn 0.4s cubic-bezier(0.34,1.56,0.64,1) forwards;
}
.tile.meld-reveal:nth-child(2) { animation-delay: 0.08s; }
.tile.meld-reveal:nth-child(3) { animation-delay: 0.16s; }
.tile.meld-reveal:nth-child(4) { animation-delay: 0.24s; }

/* ─── Tile shimmer effect for aesthetics ─── */
@keyframes tileShimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.tile.shimmer::after {
  background: linear-gradient(90deg, transparent 25%, rgba(255,255,255,0.3) 50%, transparent 75%);
  background-size: 200% 100%;
  animation: tileShimmer 3s ease-in-out infinite;
}

/* ═══ Game UI Styles ═══ */

.player-area.active-turn { position: relative; }
.player-area.active-turn::after {
  content: ''; position: absolute; inset: -6px;
  border-radius: 12px; border: 2px solid #ff6b9d;
  animation: turnRingPulse 1.5s ease-in-out infinite;
  pointer-events: none;
}
@keyframes turnRingPulse {
  0%, 100% { border-color: rgba(255,107,157,0.6); box-shadow: 0 0 8px rgba(255,107,157,0.3); }
  50% { border-color: rgba(255,107,157,0.2); box-shadow: 0 0 20px rgba(255,107,157,0.1); }
}

/* Remaining tiles ring */
.remaining-ring { width: 56px; height: 56px; position: relative; filter: drop-shadow(0 0 8px rgba(245,197,24,0.2)); }
.remaining-ring svg { transform: rotate(-90deg); }
.remaining-ring .ring-text {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  display: inline-flex; width: 40px; height: 40px; border-radius: 50%;
  align-items: center; justify-content: center;
  font-size: 16px; font-weight: 900; color: #f5c518;
  text-shadow: 0 0 8px rgba(245,197,24,0.5);
}
.remaining-ring .ring-label {
  position: absolute; bottom: -14px; left: 50%;
  transform: translateX(-50%); font-size: 10px;
  color: rgba(255,255,255,0.5); white-space: nowrap;
}

.meld-group { display: flex; gap: 1px; margin: 0 4px; opacity: 0.95; }
.meld-group .tile { cursor: default; }

.mahjong-table::before {
  content: ''; position: absolute; inset: 0; border-radius: 20px;
  background: radial-gradient(ellipse at 50% 40%, rgba(255,255,255,0.06), transparent 60%);
  pointer-events: none; z-index: 0;
}
.mahjong-table > * { position: relative; z-index: 1; }

/* Pulse for action buttons */
@keyframes actionPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
