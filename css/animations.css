/* ═══════════════════════════════════════════════════════════════
   Hello Kitty 麻将 — 动画效果
   ═══════════════════════════════════════════════════════════════ */

/* Peng/Chi/Gang action flash */
@keyframes actionFlash {
  0% { transform: scale(0.5); opacity: 0; }
  30% { transform: scale(1.3); opacity: 1; }
  100% { transform: scale(1); opacity: 0; }
}

.action-flash {
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  font-size: 64px;
  font-weight: 900;
  color: var(--pink);
  text-shadow: 0 0 30px rgba(255,107,157,0.6), 0 4px 8px rgba(0,0,0,0.3);
  z-index: 100;
  pointer-events: none;
  animation: actionFlash 0.8s ease-out forwards;
}

/* Hu (win) celebration */
@keyframes huCelebrate {
  0% { transform: translate(-50%, -50%) scale(0) rotate(-20deg); opacity: 0; }
  40% { transform: translate(-50%, -50%) scale(1.5) rotate(5deg); opacity: 1; }
  60% { transform: translate(-50%, -50%) scale(1.2) rotate(-2deg); }
  100% { transform: translate(-50%, -50%) scale(1) rotate(0); opacity: 1; }
}

.hu-celebrate {
  position: fixed;
  top: 45%; left: 50%;
  font-size: 80px;
  font-weight: 900;
  z-index: 200;
  pointer-events: none;
  animation: huCelebrate 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  text-shadow: 0 0 40px rgba(255,215,0,0.8);
}

/* Confetti */
@keyframes confettiFall {
  0% { transform: translateY(-10vh) rotate(0); opacity: 1; }
  100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
}

.confetti {
  position: fixed;
  width: 8px;
  height: 8px;
  border-radius: 2px;
  z-index: 150;
  pointer-events: none;
  animation: confettiFall 2s ease-in forwards;
}

/* Screen shake */
@keyframes shake {
  0%, 100% { transform: translate(0); }
  10% { transform: translate(-4px, 2px); }
  20% { transform: translate(4px, -2px); }
  30% { transform: translate(-3px, 3px); }
  40% { transform: translate(3px, -1px); }
  50% { transform: translate(-2px, 2px); }
  60% { transform: translate(2px, -2px); }
  70% { transform: translate(-1px, 1px); }
  80% { transform: translate(1px, -1px); }
}

.shake { animation: shake 0.4s ease; }

/* Score change popup */
@keyframes scorePopup {
  0% { transform: translateY(0) scale(0.8); opacity: 0; }
  20% { transform: translateY(-10px) scale(1.2); opacity: 1; }
  100% { transform: translateY(-40px) scale(0.9); opacity: 0; }
}

.score-popup {
  position: absolute;
  font-size: 20px;
  font-weight: 900;
  pointer-events: none;
  z-index: 100;
  animation: scorePopup 1s ease-out forwards;
}

.score-popup.positive { color: var(--gold); }
.score-popup.negative { color: var(--red); }

/* Turn indicator pulse */
@keyframes turnPulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(255,107,157,0.4); }
  50% { box-shadow: 0 0 0 8px rgba(255,107,157,0); }
}

.my-turn .player-bottom {
  animation: turnPulse 1.5s ease-in-out infinite;
}

/* Tile draw from wall */
@keyframes drawTile {
  0% { transform: translateX(50px) scale(0.5) rotateY(180deg); opacity: 0; }
  100% { transform: translateX(0) scale(1) rotateY(0); opacity: 1; }
}

.tile.drawing {
  animation: drawTile 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}
